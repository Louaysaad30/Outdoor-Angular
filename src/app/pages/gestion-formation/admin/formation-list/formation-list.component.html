<!-- Start Breadcrumbs -->
<app-breadcrumbs title="Formation Grid View" [breadcrumbItems]="breadCrumbItems"></app-breadcrumbs>
<!-- End Breadcrumbs -->

<div class="row">
  <div class="col-lg-12">
    <div class="card">
      <div class="card-body">
        <div class="row align-items-center gy-3">
          <!-- Search -->
          <div class="col-lg-3 order-last order-md-first me-auto">
            <div class="search-box">
              <input type="text" class="form-control search" [(ngModel)]="term" (keyup)="filterdata()" placeholder="Search for title...">
              <i class="ri-search-line search-icon"></i>
            </div>
          </div>

          <!-- Status Filter -->
          <div class="col-lg-2">
            <div>
              <select class="form-select" [(ngModel)]="statusFilter">
                <option value="">All</option>
                <option value="Active">Active</option>
                <option value="Inactive">Inactive</option>
              </select>
            </div>
          </div>

          <!-- Add Button + View Switch -->
          <div class="col-lg-auto text-end">
            <div class="d-flex gap-2">
              <button class="btn btn-secondary" (click)="openAddFormationModal()">
                <i class="bi bi-person-plus align-baseline me-1"></i> Add Formation
              </button>

              <!-- Grid View -->
              <button class="btn btn-subtle-primary btn-icon" [class.active]="viewMode === 'grid'" (click)="viewMode = 'grid'">
                <i class="bi bi-grid"></i>
              </button>

              <!-- List View -->
              <button class="btn btn-subtle-primary btn-icon" [class.active]="viewMode === 'list'" (click)="viewMode = 'list'">
                <i class="bi bi-list-task"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Grid View -->
<div *ngIf="viewMode === 'grid'" class="row row-cols-xl-5 row-cols-sm-2 row-cols-1">
  <div class="col" *ngFor="let data of listData">
    <div class="card overflow-hidden">
      <div class="card-body text-center">
        <img [src]="data.img" alt="" class="avatar-lg">
      </div>
      <div class="card-body">
        <h6 class="text-truncate fs-md text-capitalize">{{ data.name }}</h6>
        <p class="text-muted">{{ data.category?.nom }}</p>
        <p class="text-muted">
          <i class="bi bi-clock"></i> {{ data.dateDebut | date:'shortTime' }} - {{ data.dateFin | date:'shortTime' }}
        </p>
      </div>
    </div>
  </div>
</div>

<!-- List View -->
<div *ngIf="viewMode === 'list'" class="table-responsive mt-4">
  <table class="table table-hover">
    <thead>
      <tr>
        <th>Title</th>
        <th>Category</th>
        <th>Start Time</th>
        <th>End Time</th>
        <th>Mode</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of listData">
        <td>{{ data.name }}</td>
        <td>{{ data.category?.nom }}</td>
        <td>{{ data.dateDebut | date:'short' }}</td>
        <td>{{ data.dateFin | date:'short' }}</td>
        <td>{{ data.mode === 'presentiel' ? 'Pr√©sentiel' : 'En ligne' }}</td>
      </tr>
    </tbody>
  </table>
</div>
