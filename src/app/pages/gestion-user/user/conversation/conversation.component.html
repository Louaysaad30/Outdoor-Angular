<div class="card-body p-0  d-flex flex-column">
  <div id="users-chat" class="flex-grow-1 ">
    <ngx-simplebar  style="max-height: 450px;"  class="chat-conversation p-3" id='chat-bottom'>
      <!-- Show messages if they exist -->
      <ul *ngIf="messages.length > 0; else noMessages" class="list-unstyled chat-conversation-list chat-sm" id="users-conversation">
        <!-- Your existing message list -->
        <li *ngFor="let msg of messages" [ngClass]="msg.sender === currentUser.id ? 'chat-list right' : 'chat-list left'">
          <div class="conversation-list">
            <div *ngIf="msg.sender !== currentUser.id" class="chat-avatar">
              <img src="assets/images/users/48/avatar-2.jpg" alt="">
            </div>
            <div class="user-chat-content">
              <div class="ctext-wrap">
                <div class="ctext-wrap-content">
                  <p class="mb-0 ctext-content">{{ msg.content }} </p>
                </div>
                <div dropdown [container]="'body'" class="dropdown align-self-start message-box-drop" [dropup]="msg.sender === currentUser.id">
                  <a dropdownToggle class="dropdown-toggle" href="javascript:void(0);">
                    <i class="ri-more-2-fill"></i>
                  </a>
                  <div *bsDropdownMenu class="dropdown-menu">
                    <a class="dropdown-item" href="javascript:void(0);"><i class="ri-reply-line me-2 text-muted align-bottom"></i>Reply</a>
                    <a class="dropdown-item" href="javascript:void(0);"><i class="ri-file-copy-line me-2 text-muted align-bottom"></i>Copy</a>
                    <a class="dropdown-item delete-item" href="javascript:void(0);"><i class="ri-delete-bin-5-line me-2 text-muted align-bottom"></i>Delete</a>
                  </div>
                </div>
              </div>
              <div class="conversation-name">
                <small class="text-muted time">{{ msg.timestamp | date:'shortTime' }}</small>
                <!-- When msg.isRead is true -->
                <span class="check-message-icon text-success" *ngIf="msg.isRead === true">
                  <i class="ri-check-double-line align-bottom"></i>
                </span>

                <!-- When msg.isRead is false -->
                <span class="check-message-icon text-primary" *ngIf="msg.isRead === false">
                  <i class="ri-check-double-line align-bottom"></i>
                </span>
                </div>
            </div>
          </div>
        </li>
      </ul>
      
      <!-- No messages placeholder -->
      <ng-template #noMessages>
        <div class="d-flex flex-column align-items-center justify-content-center py-5">
          <div class="avatar-lg mb-3">
            <div class="avatar-title bg-soft-primary rounded-circle">
              <i class="bi bi-chat-square-text fs-2 text-primary"></i>
            </div>
          </div>
          <h5 class="text-muted">No messages yet</h5>
          <p class="text-muted mb-0">Send a message to start the conversation</p>
        </div>
      </ng-template>
    </ngx-simplebar>
  </div>
  <!-- Message input area (unchanged) -->
  <div >
    <div class="row g-2 mx-3 mt-2 mb-3">
      <div class="col">
        <input type="text" class="form-control border-light bg-light" placeholder="Enter Message..." [(ngModel)]="messageText">
      </div>
      <div class="col-auto">
        <button type="button" class="btn btn-secondary" (click)="sendMessage()">
          <i class="mdi mdi-send"></i>
        </button>
      </div>
    </div>
  </div>
</div>